<!doctype html>
<html lang="en">
  <head>
    <title>Vanilla Web Component SSR</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://unpkg.com/htmx.org@2.0.8"></script>
    <script type="module">
      // If these imports are removed, SSR components still renders correctly,
      // but they will not be upgraded to custom elements and
      // will not have any functionality (clicking does nothing).
      import "./hello-world.js";
      import "./radio-group.js";

      // Listen for changes to the selected color in the
      // first `radio-group` custom element, and change
      // the color of all `hello-world` custom elements to match.
      const radioGroup = document.querySelector("radio-group[name=color]");
      radioGroup.addEventListener("change", (e) => {
        const { value } = e.detail;
        const helloWorlds = document.querySelectorAll("hello-world");
        for (const helloWorld of helloWorlds) {
          helloWorld.style.color = value;
        }
      });

      const target = document.getElementById("radio-group-ssr");
      target.addEventListener("htmx:afterSettle", (event) => {
        const radioGroup = event.target.querySelector("radio-group");
        radioGroup.addEventListener("change", (e) => {
          alert(`You selected ${e.detail.label}.`);
        });
      });
    </script>
  </head>
  <body>
    <p>The following are client-side rendered web components.</p>
    <hello-world></hello-world>
    <hello-world name="CSR"></hello-world>
    <radio-group
      labels="Red,Green,Blue"
      name="color"
      value="blue"
      values="red,green,blue"
    ></radio-group>

    <button hx-get="/hello-world?name=SSR" hx-target="#greetings">
      hello-world SSR
    </button>
    <div id="greetings"></div>

    <button
      hx-get="/radio-group?name=season&labels=Spring,Summer,Fall,Winter&values=spring,summer,fall,winter&value=summer"
      hx-target="#radio-group-ssr"
    >
      radio-group SSR
    </button>
    <div id="radio-group-ssr"></div>

    <!-- <a href="/new-page">New Page</a> -->
  </body>
</html>
